name: xvla-stable
channels:
  - conda-forge
  - pytorch
  - nvidia

dependencies:
  # -------------------------
  # Core
  # -------------------------
  - python=3.10
  - pip

  # -------------------------
  # PyTorch + CUDA 12.1 (stable, aligned)
  # -------------------------
  - pytorch=2.1.*
  - pytorch-cuda=12.1
  - torchvision=0.16.*
  - torchaudio=2.1.*

  # -------------------------
  # System / C++ deps (conda-forge)
  # -------------------------
  - glib
  - ffmpeg
  - opencv
  - av
  - pyarrow
  - h5py

  # -------------------------
  # Numeric stack (real versions)
  # -------------------------
  - numpy=1.26.*
  - scipy=1.13.*

  # -------------------------
  # pip-only packages
  # -------------------------
  - pip:
      - einops==0.8.1
      - transformers<=4.51.3
      - accelerate==1.2.1
      - peft==0.17.1
      - timm==1.0.12
      - mmengine==0.10.5
      - safetensors==0.4.5
      - fastapi
      - uvicorn==0.34.3
      - tensorboard
      - json_numpy==2.1.0
      - mediapy==1.2.4
